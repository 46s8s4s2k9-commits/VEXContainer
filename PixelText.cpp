//=============================================================================
// PixelText.cpp - Implementation
//=============================================================================

#include "PixelText.hpp"


namespace PixelText {

//=============================================================================
// FONT DATA - 3x5 Ultra Compact
//=============================================================================

namespace Font3x5 {
    // 3x5 font packed efficiently - each char is 1 byte
    // Supports: Space, !"#$%&'()*+,-./0-9:;<=>?@A-Z[\]^_
    const uint8_t DATA[] = {
        // Space (0x20)
        0b00000000,
        // ! (0x21)
        0b00010101,
        // " (0x22)
        0b00000011,
        // # (0x23)
        0b01011111,
        // $ (0x24)
        0b01111101,
        // % (0x25)
        0b01001010,
        // & (0x26)
        0b01101101,
        // ' (0x27)
        0b00000001,
        // ( (0x28)
        0b00011010,
        // ) (0x29)
        0b01010011,
        // * (0x2A)
        0b00010101,
        // + (0x2B)
        0b00011100,
        // , (0x2C)
        0b01010000,
        // - (0x2D)
        0b00011000,
        // . (0x2E)
        0b01000000,
        // / (0x2F)
        0b01001001,
        // 0 (0x30)
        0b01110111,
        // 1 (0x31)
        0b01000010,
        // 2 (0x32)
        0b01101101,
        // 3 (0x33)
        0b01101110,
        // 4 (0x34)
        0b01110010,
        // 5 (0x35)
        0b00111110,
        // 6 (0x36)
        0b00111111,
        // 7 (0x37)
        0b01000110,
        // 8 (0x38)
        0b01111111,
        // 9 (0x39)
        0b01111110,
        // : (0x3A)
        0b01010001,
        // ; (0x3B)
        0b01010001,
        // < (0x3C)
        0b00011010,
        // = (0x3D)
        0b00111100,
        // > (0x3E)
        0b01010011,
        // ? (0x3F)
        0b00100101,
        // @ (0x40)
        0b01111101,
        // A (0x41)
        0b01110111,
        // B (0x42)
        0b01111111,
        // C (0x43)
        0b00001111,
        // D (0x44)
        0b01111111,
        // E (0x45)
        0b00111111,
        // F (0x46)
        0b00100111,
        // G (0x47)
        0b00111111,
        // H (0x48)
        0b01110011,
        // I (0x49)
        0b00001110,
        // J (0x4A)
        0b01111100,
        // K (0x4B)
        0b01101011,
        // L (0x4C)
        0b00001111,
        // M (0x4D)
        0b01010111,
        // N (0x4E)
        0b01010011,
        // O (0x4F)
        0b01111111,
        // P (0x50)
        0b01100111,
        // Q (0x51)
        0b01111011,
        // R (0x52)
        0b01100011,
        // S (0x53)
        0b00111110,
        // T (0x54)
        0b00000111,
        // U (0x55)
        0b01111101,
        // V (0x56)
        0b01011010,
        // W (0x57)
        0b01110111,
        // X (0x58)
        0b01101010,
        // Y (0x59)
        0b01110110,
        // Z (0x5A)
        0b01101101
    };
    
    const Font INFO = {DATA, WIDTH, HEIGHT, STRIDE, START, END, "3x5"};
}

//=============================================================================
// FONT DATA - 5x7 Standard
//=============================================================================

namespace Font5x7 {
    const uint8_t DATA[] = {
        // Space (0x20)
        0x00, 0x00, 0x00, 0x00, 0x00,
        // ! (0x21)
        0x00, 0x00, 0x5F, 0x00, 0x00,
        // " (0x22)
        0x00, 0x07, 0x00, 0x07, 0x00,
        // # (0x23)
        0x14, 0x7F, 0x14, 0x7F, 0x14,
        // $ (0x24)
        0x24, 0x2A, 0x7F, 0x2A, 0x12,
        // % (0x25)
        0x23, 0x13, 0x08, 0x64, 0x62,
        // & (0x26)
        0x36, 0x49, 0x55, 0x22, 0x50,
        // ' (0x27)
        0x00, 0x05, 0x03, 0x00, 0x00,
        // ( (0x28)
        0x00, 0x1C, 0x22, 0x41, 0x00,
        // ) (0x29)
        0x00, 0x41, 0x22, 0x1C, 0x00,
        // * (0x2A)
        0x08, 0x2A, 0x1C, 0x2A, 0x08,
        // + (0x2B)
        0x08, 0x08, 0x3E, 0x08, 0x08,
        // , (0x2C)
        0x00, 0x50, 0x30, 0x00, 0x00,
        // - (0x2D)
        0x08, 0x08, 0x08, 0x08, 0x08,
        // . (0x2E)
        0x00, 0x60, 0x60, 0x00, 0x00,
        // / (0x2F)
        0x20, 0x10, 0x08, 0x04, 0x02,
        // 0 (0x30)
        0x3E, 0x51, 0x49, 0x45, 0x3E,
        // 1 (0x31)
        0x00, 0x42, 0x7F, 0x40, 0x00,
        // 2 (0x32)
        0x42, 0x61, 0x51, 0x49, 0x46,
        // 3 (0x33)
        0x21, 0x41, 0x45, 0x4B, 0x31,
        // 4 (0x34)
        0x18, 0x14, 0x12, 0x7F, 0x10,
        // 5 (0x35)
        0x27, 0x45, 0x45, 0x45, 0x39,
        // 6 (0x36)
        0x3C, 0x4A, 0x49, 0x49, 0x30,
        // 7 (0x37)
        0x01, 0x71, 0x09, 0x05, 0x03,
        // 8 (0x38)
        0x36, 0x49, 0x49, 0x49, 0x36,
        // 9 (0x39)
        0x06, 0x49, 0x49, 0x29, 0x1E,
        // : (0x3A)
        0x00, 0x36, 0x36, 0x00, 0x00,
        // ; (0x3B)
        0x00, 0x56, 0x36, 0x00, 0x00,
        // < (0x3C)
        0x00, 0x08, 0x14, 0x22, 0x41,
        // = (0x3D)
        0x14, 0x14, 0x14, 0x14, 0x14,
        // > (0x3E)
        0x41, 0x22, 0x14, 0x08, 0x00,
        // ? (0x3F)
        0x02, 0x01, 0x51, 0x09, 0x06,
        // @ (0x40)
        0x32, 0x49, 0x79, 0x41, 0x3E,
        // A (0x41)
        0x7E, 0x11, 0x11, 0x11, 0x7E,
        // B (0x42)
        0x7F, 0x49, 0x49, 0x49, 0x36,
        // C (0x43)
        0x3E, 0x41, 0x41, 0x41, 0x22,
        // D (0x44)
        0x7F, 0x41, 0x41, 0x22, 0x1C,
        // E (0x45)
        0x7F, 0x49, 0x49, 0x49, 0x41,
        // F (0x46)
        0x7F, 0x09, 0x09, 0x01, 0x01,
        // G (0x47)
        0x3E, 0x41, 0x41, 0x51, 0x32,
        // H (0x48)
        0x7F, 0x08, 0x08, 0x08, 0x7F,
        // I (0x49)
        0x00, 0x41, 0x7F, 0x41, 0x00,
        // J (0x4A)
        0x20, 0x40, 0x41, 0x3F, 0x01,
        // K (0x4B)
        0x7F, 0x08, 0x14, 0x22, 0x41,
        // L (0x4C)
        0x7F, 0x40, 0x40, 0x40, 0x40,
        // M (0x4D)
        0x7F, 0x02, 0x04, 0x02, 0x7F,
        // N (0x4E)
        0x7F, 0x04, 0x08, 0x10, 0x7F,
        // O (0x4F)
        0x3E, 0x41, 0x41, 0x41, 0x3E,
        // P (0x50)
        0x7F, 0x09, 0x09, 0x09, 0x06,
        // Q (0x51)
        0x3E, 0x41, 0x51, 0x21, 0x5E,
        // R (0x52)
        0x7F, 0x09, 0x19, 0x29, 0x46,
        // S (0x53)
        0x46, 0x49, 0x49, 0x49, 0x31,
        // T (0x54)
        0x01, 0x01, 0x7F, 0x01, 0x01,
        // U (0x55)
        0x3F, 0x40, 0x40, 0x40, 0x3F,
        // V (0x56)
        0x1F, 0x20, 0x40, 0x20, 0x1F,
        // W (0x57)
        0x7F, 0x20, 0x18, 0x20, 0x7F,
        // X (0x58)
        0x63, 0x14, 0x08, 0x14, 0x63,
        // Y (0x59)
        0x03, 0x04, 0x78, 0x04, 0x03,
        // Z (0x5A)
        0x61, 0x51, 0x49, 0x45, 0x43,
        // [ (0x5B)
        0x00, 0x00, 0x7F, 0x41, 0x41,
        // \ (0x5C)
        0x02, 0x04, 0x08, 0x10, 0x20,
        // ] (0x5D)
        0x41, 0x41, 0x7F, 0x00, 0x00,
        // ^ (0x5E)
        0x04, 0x02, 0x01, 0x02, 0x04,
        // _ (0x5F)
        0x40, 0x40, 0x40, 0x40, 0x40,
        // ` (0x60)
        0x00, 0x01, 0x02, 0x04, 0x00,
        // a (0x61)
        0x20, 0x54, 0x54, 0x54, 0x78,
        // b (0x62)
        0x7F, 0x48, 0x44, 0x44, 0x38,
        // c (0x63)
        0x38, 0x44, 0x44, 0x44, 0x20,
        // d (0x64)
        0x38, 0x44, 0x44, 0x48, 0x7F,
        // e (0x65)
        0x38, 0x54, 0x54, 0x54, 0x18,
        // f (0x66)
        0x08, 0x7E, 0x09, 0x01, 0x02,
        // g (0x67)
        0x08, 0x14, 0x54, 0x54, 0x3C,
        // h (0x68)
        0x7F, 0x08, 0x04, 0x04, 0x78,
        // i (0x69)
        0x00, 0x44, 0x7D, 0x40, 0x00,
        // j (0x6A)
        0x20, 0x40, 0x44, 0x3D, 0x00,
        // k (0x6B)
        0x00, 0x7F, 0x10, 0x28, 0x44,
        // l (0x6C)
        0x00, 0x41, 0x7F, 0x40, 0x00,
        // m (0x6D)
        0x7C, 0x04, 0x18, 0x04, 0x78,
        // n (0x6E)
        0x7C, 0x08, 0x04, 0x04, 0x78,
        // o (0x6F)
        0x38, 0x44, 0x44, 0x44, 0x38,
        // p (0x70)
        0x7C, 0x14, 0x14, 0x14, 0x08,
        // q (0x71)
        0x08, 0x14, 0x14, 0x18, 0x7C,
        // r (0x72)
        0x7C, 0x08, 0x04, 0x04, 0x08,
        // s (0x73)
        0x48, 0x54, 0x54, 0x54, 0x20,
        // t (0x74)
        0x04, 0x3F, 0x44, 0x40, 0x20,
        // u (0x75)
        0x3C, 0x40, 0x40, 0x20, 0x7C,
        // v (0x76)
        0x1C, 0x20, 0x40, 0x20, 0x1C,
        // w (0x77)
        0x3C, 0x40, 0x30, 0x40, 0x3C,
        // x (0x78)
        0x44, 0x28, 0x10, 0x28, 0x44,
        // y (0x79)
        0x0C, 0x50, 0x50, 0x50, 0x3C,
        // z (0x7A)
        0x44, 0x64, 0x54, 0x4C, 0x44,
        // { (0x7B)
        0x00, 0x08, 0x36, 0x41, 0x00,
        // | (0x7C)
        0x00, 0x00, 0x7F, 0x00, 0x00,
        // } (0x7D)
        0x00, 0x41, 0x36, 0x08, 0x00,
        // ~ (0x7E)
        0x08, 0x04, 0x08, 0x10, 0x08
    };
    
    const Font INFO = {DATA, WIDTH, HEIGHT, STRIDE, START, END, "5x7"};
}

//=============================================================================
// FONT DATA - 6x8 Medium
//=============================================================================

namespace Font6x8 {
    const uint8_t DATA[] = {
        // Space through ~ (96 chars)
        // Format: 6 bytes per char, each byte is a column
        0x00,0x00,0x00,0x00,0x00,0x00, // Space
        0x00,0x00,0x5F,0x5F,0x00,0x00, // !
        0x00,0x07,0x07,0x00,0x07,0x07, // "
        0x14,0x7F,0x7F,0x14,0x7F,0x14, // #
        0x24,0x2E,0x6B,0x6B,0x3A,0x12, // $
        0x46,0x66,0x30,0x18,0x0C,0x66, // %
        0x30,0x7A,0x4F,0x5D,0x37,0x7A, // &
        0x00,0x00,0x07,0x07,0x00,0x00, // '
        0x00,0x1C,0x3E,0x63,0x41,0x00, // (
        0x00,0x41,0x63,0x3E,0x1C,0x00, // )
        0x08,0x2A,0x3E,0x1C,0x3E,0x2A, // *
        0x08,0x08,0x3E,0x3E,0x08,0x08, // +
        0x00,0x80,0xE0,0x60,0x00,0x00, // ,
        0x08,0x08,0x08,0x08,0x08,0x08, // -
        0x00,0x00,0x60,0x60,0x00,0x00, // .
        0x60,0x30,0x18,0x0C,0x06,0x03, // /
        // 0-9
        0x3E,0x7F,0x51,0x49,0x7F,0x3E, // 0
        0x00,0x42,0x7F,0x7F,0x40,0x00, // 1
        0x62,0x73,0x59,0x49,0x6F,0x66, // 2
        0x22,0x63,0x49,0x49,0x7F,0x36, // 3
        0x18,0x1C,0x16,0x13,0x7F,0x10, // 4
        0x27,0x67,0x45,0x45,0x7D,0x39, // 5
        0x3C,0x7E,0x4B,0x49,0x79,0x30, // 6
        0x03,0x03,0x71,0x79,0x0F,0x07, // 7
        0x36,0x7F,0x49,0x49,0x7F,0x36, // 8
        0x06,0x4F,0x49,0x69,0x3F,0x1E, // 9
        // : ; < = > ? @
        0x00,0x00,0x6C,0x6C,0x00,0x00, // :
        0x00,0x80,0xEC,0x6C,0x00,0x00, // ;
        0x08,0x1C,0x36,0x63,0x41,0x00, // <
        0x14,0x14,0x14,0x14,0x14,0x14, // =
        0x00,0x41,0x63,0x36,0x1C,0x08, // >
        0x02,0x03,0x51,0x59,0x0F,0x06, // ?
        0x3E,0x7F,0x41,0x5D,0x55,0x1E, // @
        // A-Z (uppercase)
        0x7C,0x7E,0x13,0x13,0x7E,0x7C, // A
        0x7F,0x7F,0x49,0x49,0x7F,0x36, // B
        0x3E,0x7F,0x41,0x41,0x63,0x22, // C
        0x7F,0x7F,0x41,0x41,0x7F,0x3E, // D
        0x7F,0x7F,0x49,0x49,0x41,0x41, // E
        0x7F,0x7F,0x09,0x09,0x01,0x01, // F
        0x3E,0x7F,0x41,0x49,0x7B,0x3A, // G
        0x7F,0x7F,0x08,0x08,0x7F,0x7F, // H
        0x00,0x41,0x7F,0x7F,0x41,0x00, // I
        0x30,0x70,0x40,0x41,0x7F,0x3F, // J
        0x7F,0x7F,0x1C,0x36,0x63,0x41, // K
        0x7F,0x7F,0x40,0x40,0x40,0x40, // L
        0x7F,0x7F,0x06,0x0C,0x06,0x7F, // M
        0x7F,0x7F,0x06,0x0C,0x18,0x7F, // N
        0x3E,0x7F,0x41,0x41,0x7F,0x3E, // O
        0x7F,0x7F,0x09,0x09,0x0F,0x06, // P
        0x1E,0x3F,0x21,0x61,0x7F,0x5E, // Q
        0x7F,0x7F,0x19,0x39,0x6F,0x46, // R
        0x26,0x6F,0x49,0x49,0x7B,0x32, // S
        0x01,0x01,0x7F,0x7F,0x01,0x01, // T
        0x3F,0x7F,0x40,0x40,0x7F,0x3F, // U
        0x1F,0x3F,0x60,0x60,0x3F,0x1F, // V
        0x7F,0x7F,0x30,0x18,0x30,0x7F, // W
        0x63,0x77,0x1C,0x1C,0x77,0x63, // X
        0x07,0x0F,0x78,0x78,0x0F,0x07, // Y
        0x61,0x71,0x59,0x4D,0x47,0x43, // Z
        // [ \ ] ^ _ ` a-z
        0x00,0x7F,0x7F,0x41,0x41,0x00, // [
        0x03,0x06,0x0C,0x18,0x30,0x60, // backslash
        0x00,0x41,0x41,0x7F,0x7F,0x00, // ]
        0x08,0x0C,0x06,0x03,0x06,0x0C, // ^
        0x80,0x80,0x80,0x80,0x80,0x80, // _
        0x00,0x00,0x03,0x07,0x04,0x00, // `
        0x20,0x74,0x54,0x54,0x7C,0x78, // a
        0x7F,0x7F,0x44,0x44,0x7C,0x38, // b
        0x38,0x7C,0x44,0x44,0x6C,0x28, // c
        0x38,0x7C,0x44,0x44,0x7F,0x7F, // d
        0x38,0x7C,0x54,0x54,0x5C,0x18, // e
        0x08,0x7E,0x7F,0x09,0x03,0x02, // f
        0x98,0xBC,0xA4,0xA4,0xFC,0x7C, // g
        0x7F,0x7F,0x04,0x04,0x7C,0x78, // h
        0x00,0x44,0x7D,0x7D,0x40,0x00, // i
        0x40,0xC4,0x84,0xFD,0x7D,0x00, // j
        0x7F,0x7F,0x10,0x38,0x6C,0x44, // k
        0x00,0x41,0x7F,0x7F,0x40,0x00, // l
        0x7C,0x7C,0x0C,0x18,0x0C,0x7C, // m
        0x7C,0x7C,0x04,0x04,0x7C,0x78, // n
        0x38,0x7C,0x44,0x44,0x7C,0x38, // o
        0xFC,0xFC,0x24,0x24,0x3C,0x18, // p
        0x18,0x3C,0x24,0x24,0xFC,0xFC, // q
        0x7C,0x7C,0x04,0x04,0x0C,0x08, // r
        0x48,0x5C,0x54,0x54,0x74,0x24, // s
        0x04,0x3F,0x7F,0x44,0x64,0x20, // t
        0x3C,0x7C,0x40,0x40,0x7C,0x7C, // u
        0x1C,0x3C,0x60,0x60,0x3C,0x1C, // v
        0x3C,0x7C,0x60,0x30,0x60,0x7C, // w
        0x44,0x6C,0x38,0x38,0x6C,0x44, // x
        0x9C,0xBC,0xA0,0xA0,0xFC,0x7C, // y
        0x44,0x64,0x74,0x5C,0x4C,0x44, // z
        0x08,0x08,0x3E,0x77,0x41,0x41, // {
        0x00,0x00,0x7F,0x7F,0x00,0x00, // |
        0x41,0x41,0x77,0x3E,0x08,0x08, // }
        0x02,0x03,0x01,0x03,0x02,0x03  // ~
    };
    
    const Font INFO = {DATA, WIDTH, HEIGHT, STRIDE, START, END, "6x8"};
}

//=============================================================================
// FONT DATA - 7x10 Large
//=============================================================================

namespace Font7x10 {
    const uint8_t DATA[] = {
        // Space
        0,0,0,0,0,0,0,
        // ! through /
        0,0,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0,0,0,0,0,0,
        0,0,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0,0,0,0,0,0,
        0,0,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0,0,0,0,0,0,
        0,0,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0,0,0,0,0,0,
        // 0-9 (0x30)
        0x7E, 0xFF, 0x81, 0x81, 0x81, 0xFF, 0x7E, // 0
        0x00, 0x82, 0xFF, 0xFF, 0x80, 0x80, 0x00, // 1
        0x82, 0xC3, 0xE1, 0xB1, 0x99, 0x8F, 0x86, // 2
        0x42, 0xC3, 0x89, 0x89, 0x89, 0xFF, 0x76, // 3
        0x18, 0x1C, 0x16, 0x13, 0xFF, 0xFF, 0x10, // 4
        0x4F, 0xCF, 0x89, 0x89, 0x89, 0xF9, 0x71, // 5
        0x7E, 0xFF, 0x89, 0x89, 0x89, 0xF9, 0x70, // 6
        0x01, 0x01, 0xF1, 0xF9, 0x0D, 0x07, 0x03, // 7
        0x76, 0xFF, 0x89, 0x89, 0x89, 0xFF, 0x76, // 8
        0x0E, 0x9F, 0x91, 0x91, 0x91, 0xFF, 0x7E, // 9
        // : through @
        0,0,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0,0,0,0,0,0,
        0,0,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0,0,0,0,0,0,
        // A-Z (0x41)
        0xFE, 0xFF, 0x11, 0x11, 0x11, 0xFF, 0xFE, // A
        0xFF, 0xFF, 0x89, 0x89, 0x89, 0xFF, 0x76, // B
        0x7E, 0xFF, 0x81, 0x81, 0x81, 0xC3, 0x42, // C
        0xFF, 0xFF, 0x81, 0x81, 0x81, 0xFF, 0x7E, // D
        0xFF, 0xFF, 0x89, 0x89, 0x89, 0x81, 0x81, // E
        0xFF, 0xFF, 0x09, 0x09, 0x09, 0x01, 0x01, // F
        0x7E, 0xFF, 0x81, 0x89, 0x89, 0xF9, 0x78, // G
        0xFF, 0xFF, 0x08, 0x08, 0x08, 0xFF, 0xFF, // H
        0x00, 0x81, 0xFF, 0xFF, 0x81, 0x00, 0x00, // I
        0x40, 0xC0, 0x80, 0x80, 0x80, 0xFF, 0x7F, // J
        0xFF, 0xFF, 0x1C, 0x36, 0x63, 0xC1, 0x80, // K
        0xFF, 0xFF, 0x80, 0x80, 0x80, 0x80, 0x80, // L
        0xFF, 0xFF, 0x06, 0x0C, 0x06, 0xFF, 0xFF, // M
        0xFF, 0xFF, 0x06, 0x0C, 0x18, 0xFF, 0xFF, // N
        0x7E, 0xFF, 0x81, 0x81, 0x81, 0xFF, 0x7E, // O
        0xFF, 0xFF, 0x11, 0x11, 0x11, 0x1F, 0x0E, // P
        0x7E, 0xFF, 0x81, 0xC1, 0xE1, 0xFF, 0xFE, // Q
        0xFF, 0xFF, 0x19, 0x39, 0x79, 0xEF, 0x86, // R
        0x46, 0xCF, 0x89, 0x89, 0x89, 0xF9, 0x72, // S
        0x01, 0x01, 0xFF, 0xFF, 0x01, 0x01, 0x01, // T
        0x7F, 0xFF, 0x80, 0x80, 0x80, 0xFF, 0x7F, // U
        0x0F, 0x3F, 0x70, 0xC0, 0x70, 0x3F, 0x0F, // V
        0xFF, 0xFF, 0x60, 0x30, 0x60, 0xFF, 0xFF, // W
        0xC3, 0xE7, 0x3C, 0x18, 0x3C, 0xE7, 0xC3, // X
        0x03, 0x0F, 0xF8, 0xF0, 0x08, 0x07, 0x03, // Y
        0xC1, 0xE1, 0xB1, 0x99, 0x8D, 0x87, 0x83  // Z
    };
    
    const Font INFO = {DATA, WIDTH, HEIGHT, STRIDE, START, END, "7x10"};
}

//=============================================================================
// FONT DATA - 8x12 Extra Large
//=============================================================================

namespace Font8x12 {
    const uint8_t DATA[] = {
        // Space
        0,0,0,0,0,0,0,0,
        // Simplified set - just uppercase and numbers for large display
        // Fill with zeros for unused chars
        0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,
        // 0-9
        0xFE,0xFF,0xFF,0x03,0x03,0xFF,0xFF,0xFE, // 0
        0x00,0x06,0xFF,0xFF,0xFF,0x00,0x00,0x00, // 1
        0x06,0x87,0xC3,0xE3,0x73,0x3F,0x1E,0x0C, // 2
        0x86,0x87,0x33,0x33,0x33,0xFF,0xEE,0xCC, // 3
        0xE0,0xF0,0xD8,0xCC,0xFF,0xFF,0xC0,0xC0, // 4
        0x3F,0x3F,0x33,0x33,0x33,0xF3,0xE3,0xC3, // 5
        0xFC,0xFE,0xFF,0x33,0x33,0xF3,0xE3,0xC0, // 6
        0x03,0x03,0xC3,0xF3,0x3F,0x0F,0x03,0x00, // 7
        0xEE,0xFF,0xFF,0x33,0x33,0xFF,0xFF,0xEE, // 8
        0x1E,0x3F,0x73,0x63,0x63,0xFF,0xFF,0xFE, // 9
        // : through @
        0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,
        // A-Z
        0xFC,0xFE,0xFF,0x33,0x33,0xFF,0xFE,0xFC, // A
        0xFF,0xFF,0xFF,0x33,0x33,0xFF,0xEE,0xCC, // B
        0xFC,0xFE,0xFF,0x03,0x03,0x87,0x86,0x84, // C
        0xFF,0xFF,0xFF,0x03,0x03,0xFF,0xFE,0xFC, // D
        0xFF,0xFF,0xFF,0x33,0x33,0x03,0x03,0x03, // E
        0xFF,0xFF,0xFF,0x33,0x33,0x03,0x03,0x03, // F
        0xFC,0xFE,0xFF,0x03,0x33,0xF7,0xF6,0xF4, // G
        0xFF,0xFF,0xFF,0x30,0x30,0xFF,0xFF,0xFF, // H
        0x00,0x03,0xFF,0xFF,0xFF,0x03,0x00,0x00, // I
        0x80,0x80,0x00,0x00,0xFF,0xFF,0xFF,0x00, // J
        0xFF,0xFF,0xFF,0x30,0x78,0xEC,0xC6,0x03, // K
        0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00, // L
        0xFF,0xFF,0x0E,0x1C,0x0E,0xFF,0xFF,0xFF, // M
        0xFF,0xFF,0x0E,0x1C,0x38,0xFF,0xFF,0xFF, // N
        0xFC,0xFE,0xFF,0x03,0x03,0xFF,0xFE,0xFC, // O
        0xFF,0xFF,0xFF,0x33,0x33,0x3F,0x3E,0x1C, // P
        0xFC,0xFE,0xFF,0x03,0x03,0xFF,0xFE,0xFC, // Q
        0xFF,0xFF,0xFF,0x33,0x73,0xFF,0xEE,0x8C, // R
        0x1E,0x3F,0x73,0x63,0x63,0xE7,0xCE,0x8C, // S
        0x03,0x03,0xFF,0xFF,0xFF,0x03,0x03,0x03, // T
        0xFF,0xFF,0xFF,0x00,0x00,0xFF,0xFF,0xFF, // U
        0x3F,0x7F,0xE0,0xC0,0xE0,0x7F,0x3F,0x0F, // V
        0xFF,0xFF,0xE0,0x70,0xE0,0xFF,0xFF,0xFF, // W
        0x87,0xCF,0xFC,0x30,0xFC,0xCF,0x87,0x03, // X
        0x0F,0x1F,0xF8,0xF0,0xF8,0x1F,0x0F,0x07, // Y
        0x03,0xC3,0xE3,0x73,0x3B,0x1F,0x0F,0x07  // Z
    };
    
    const Font INFO = {DATA, WIDTH, HEIGHT, STRIDE, START, END, "8x12"};
}

//=============================================================================
// ICON DATA - 8x8 Symbols
//=============================================================================

namespace Icon8x8 {
    const uint8_t DATA[][8] = {
        // CHECKMARK
        {0x00, 0x80, 0xC0, 0x60, 0x30, 0x18, 0x0C, 0x06},
        // CROSS
        {0xC3, 0xE7, 0x7E, 0x3C, 0x3C, 0x7E, 0xE7, 0xC3},
        // ARROW_UP
        {0x18, 0x3C, 0x7E, 0xFF, 0x18, 0x18, 0x18, 0x18},
        // ARROW_DOWN
        {0x18, 0x18, 0x18, 0x18, 0xFF, 0x7E, 0x3C, 0x18},
        // ARROW_LEFT
        {0x10, 0x30, 0x70, 0xFF, 0xFF, 0x70, 0x30, 0x10},
        // ARROW_RIGHT
        {0x08, 0x0C, 0x0E, 0xFF, 0xFF, 0x0E, 0x0C, 0x08},
        // BATTERY_FULL
        {0x3C, 0x42, 0x5A, 0x5A, 0x5A, 0x5A, 0x42, 0x3C},
        // BATTERY_HALF
        {0x3C, 0x42, 0x42, 0x42, 0x5A, 0x5A, 0x42, 0x3C},
        // BATTERY_LOW
        {0x3C, 0x42, 0x42, 0x42, 0x42, 0x42, 0x5A, 0x3C},
        // WARNING
        {0x18, 0x3C, 0x66, 0xC3, 0xC3, 0xFF, 0xFF, 0xFF},
        // INFO
        {0x3C, 0x42, 0x99, 0xBD, 0xBD, 0x99, 0x42, 0x3C},
        // SETTINGS
        {0x0C, 0x52, 0xB2, 0xFE, 0xFE, 0xB2, 0x52, 0x0C},
        // PNEUMATIC
        {0xFF, 0x81, 0xBD, 0xBD, 0xBD, 0xBD, 0x81, 0xFF},
        // MOTOR
        {0x3C, 0x7E, 0xDB, 0xDB, 0xDB, 0xDB, 0x7E, 0x3C},
        // SENSOR
        {0x38, 0x44, 0x92, 0xAA, 0xAA, 0x92, 0x44, 0x38},
        // RADIO
        {0x08, 0x14, 0x22, 0x7F, 0x7F, 0x22, 0x14, 0x08}
    };
}

//=============================================================================
// RENDERER IMPLEMENTATION
//=============================================================================

int Renderer::drawChar(int x, int y, char c, const Font& font, 
                       vex::color fgColor, int bgColor) {
    if (c < font.startChar || c > font.endChar) return 0;
    if (x >= 480 || y >= 240) return 0;
    
    uint16_t charIndex = (c - font.startChar) * font.stride;
    brain.Screen.setPenColor(fgColor);
    
    // Draw background if specified
    if (bgColor >= 0) {
        brain.Screen.setFillColor((vex::color)bgColor);
        brain.Screen.drawRectangle(x, y, font.width, font.height);
    }
    
    // Draw character pixel by pixel
    for (uint8_t col = 0; col < font.width && (x + col) < 480; col++) {
        uint8_t colData = font.data[charIndex + col];
        for (uint8_t row = 0; row < font.height && (y + row) < 240; row++) {
            if (colData & (1 << row)) {
                brain.Screen.drawPixel(x + col, y + row);
            }
        }
    }
    
    return font.width + 1; // Character width + spacing
}

int Renderer::drawString(int x, int y, int maxWidth, const Font& font,
                         vex::color fgColor, const char* text) {
    int startX = x;
    int startY = y;
    int lineCount = 1;
    
    for (const char* p = text; *p; p++) {
        if (*p == '\n') {
            x = startX;
            y += font.height + 2;
            lineCount++;
            continue;
        }
        
        int charWidth = font.width + 1;
        if (maxWidth > 0 && (x + charWidth - startX) > maxWidth) {
            x = startX;
            y += font.height + 2;
            lineCount++;
        }
        
        x += drawChar(x, y, *p, font, fgColor);
    }
    
    return lineCount;
}

int Renderer::drawFormat(int x, int y, const Font& font, vex::color fgColor,
                         const char* fmt, ...) {
    char buffer[128];
    va_list args;
    va_start(args, fmt);
    vsnprintf(buffer, sizeof(buffer), fmt, args);
    va_end(args);
    
    return drawString(x, y, 0, font, fgColor, buffer);
}

int Renderer::drawCentered(int centerX, int y, const Font& font, 
                           vex::color fgColor, const char* fmt, ...) {
    char buffer[128];
    va_list args;
    va_start(args, fmt);
    vsnprintf(buffer, sizeof(buffer), fmt, args);
    va_end(args);
    
    int width = measureText(buffer, font);
    int x = centerX - width / 2;
    return drawString(x, y, 0, font, fgColor, buffer);
}

int Renderer::drawRight(int rightX, int y, const Font& font,
                        vex::color fgColor, const char* fmt, ...) {
    char buffer[128];
    va_list args;
    va_start(args, fmt);
    vsnprintf(buffer, sizeof(buffer), fmt, args);
    va_end(args);
    
    int width = measureText(buffer, font);
    return drawString(rightX - width, y, 0, font, fgColor, buffer);
}

void Renderer::drawIcon(int x, int y, Icon8x8::Icons icon, vex::color color) {
    if (icon >= Icon8x8::COUNT) return;
    
    brain.Screen.setPenColor(color);
    
    for (int col = 0; col < 8; col++) {
        uint8_t colData = Icon8x8::DATA[icon][col];
        for (int row = 0; row < 8; row++) {
            if (colData & (1 << row)) {
                brain.Screen.drawPixel(x + col, y + row);
            }
        }
    }
}

int Renderer::measureText(const char* text, const Font& font) {
    int width = 0;
    for (const char* p = text; *p; p++) {
        if (*p >= font.startChar && *p <= font.endChar) {
            width += font.width + 1;
        }
    }
    return width > 0 ? width - 1 : 0; // Remove trailing space
}

//=============================================================================
// UI WIDGETS
//=============================================================================

void Renderer::drawButton(int x, int y, int w, int h, const char* label, uint8_t state) {
    vex::color bgColor, fgColor, borderColor;
    
    switch(state) {
        case 2: // Pressed
            bgColor = Colors::BTN_PRESSED;
            fgColor = vex::color::black;
            borderColor = vex::color::black;
            break;
        case 1: // Selected
            bgColor = Colors::BTN_SELECTED;
            fgColor = vex::color::white;
            borderColor = vex::color::white;
            break;
        default: // Normal
            bgColor = Colors::BTN_NORMAL;
            fgColor = vex::color::white;
            borderColor = Colors::BORDER;
            break;
    }
    
    // Background
    brain.Screen.setFillColor(bgColor);
    brain.Screen.setPenColor(borderColor);
    brain.Screen.drawRectangle(x, y, w, h);
    
    // Border
    brain.Screen.setPenWidth(2);
    brain.Screen.drawRectangle(x, y, w, h);
    brain.Screen.setPenWidth(1);
    
    // Centered text
    int textWidth = measureText(label, Font5x7::INFO);
    int textX = x + (w - textWidth) / 2;
    int textY = y + (h - Font5x7::HEIGHT) / 2;
    drawString(textX, textY, 0, Font5x7::INFO, fgColor, label);
}

void Renderer::drawProgressBar(int x, int y, int w, int h, int value, int maxValue,
                               vex::color fillColor, vex::color bgColor) {
    // Background
    brain.Screen.setFillColor(bgColor);
    brain.Screen.setPenColor(Colors::BORDER);
    brain.Screen.drawRectangle(x, y, w, h);
    
    // Fill
    int fillW = (value * w) / maxValue;
    if (fillW > 0) {
        brain.Screen.setFillColor(fillColor);
        brain.Screen.setPenColor(fillColor);
        brain.Screen.drawRectangle(x, y, fillW, h);
    }
    
    // Border
    brain.Screen.setPenColor(vex::color::white);
    brain.Screen.setPenWidth(1);
    brain.Screen.drawRectangle(x, y, w, h);
    
    // Value text
    char buf[16];
    snprintf(buf, sizeof(buf), "%d", value);
    int textX = x + (w - measureText(buf, Font5x7::INFO)) / 2;
    int textY = y + (h - Font5x7::HEIGHT) / 2;
    drawString(textX, textY, 0, Font5x7::INFO, vex::color::white, buf);
}

void Renderer::drawLabelValue(int x, int y, const char* label, const char* value,
                              vex::color labelColor, vex::color valueColor) {
    int labelW = measureText(label, Font5x7::INFO);
    drawString(x, y, 0, Font5x7::INFO, labelColor, label);
    drawString(x + labelW + 4, y, 0, Font5x7::INFO, valueColor, value);
}

void Renderer::drawDivider(int y, vex::color color) {
    brain.Screen.setPenColor(color);
    brain.Screen.drawLine(0, y, 480, y);
}

void Renderer::drawBox(int x, int y, int w, int h, vex::color fillColor,
                       vex::color borderColor, uint8_t borderWidth) {
    brain.Screen.setFillColor(fillColor);
    brain.Screen.setPenColor(borderColor);
    brain.Screen.setPenWidth(borderWidth);
    brain.Screen.drawRectangle(x, y, w, h);
    brain.Screen.setPenWidth(1);
}

void Renderer::clearRegion(int x, int y, int w, int h, vex::color bgColor) {
    brain.Screen.setFillColor(bgColor);
    brain.Screen.setPenColor(bgColor);
    brain.Screen.drawRectangle(x, y, w, h);
}

void Renderer::drawStatusDot(int x, int y, int radius, vex::color color) {
    brain.Screen.setFillColor(color);
    brain.Screen.setPenColor(color);
    brain.Screen.drawCircle(x, y, radius);
}

void Renderer::drawToggle(int x, int y, int w, int h, bool state, const char* label) {
    vex::color bgColor = state ? Colors::SUCCESS : Colors::BTN_NORMAL;
    vex::color knobColor = vex::color::white;
    
    // Background track
    brain.Screen.setFillColor(bgColor);
    brain.Screen.setPenColor(Colors::BORDER);
    brain.Screen.drawRectangle(x, y, w, h);
    
    // Knob
    int knobW = h - 4;
    int knobX = state ? (x + w - knobW - 2) : (x + 2);
    brain.Screen.setFillColor(knobColor);
    brain.Screen.setPenColor(knobColor);
    brain.Screen.drawRectangle(knobX, y + 2, knobW, h - 4);
    
    // Label
    if (label) {
        drawString(x + w + 8, y + (h - Font5x7::HEIGHT) / 2, 0, 
                  Font5x7::INFO, Colors::TEXT_PRIMARY, label);
    }
}

void Renderer::drawGraphPoint(int x, int y, int w, int h, int* values, int count,
                             int minVal, int maxVal, vex::color lineColor) {
    if (count < 2) return;
    
    brain.Screen.setPenColor(lineColor);
    
    int range = maxVal - minVal;
    if (range == 0) range = 1;
    
    int stepX = w / (count - 1);
    int lastX = x;
    int lastY = y + h - ((values[0] - minVal) * h / range);
    
    for (int i = 1; i < count; i++) {
        int curX = x + i * stepX;
        int curY = y + h - ((values[i] - minVal) * h / range);
        brain.Screen.drawLine(lastX, lastY, curX, curY);
        lastX = curX;
        lastY = curY;
    }
}

//=============================================================================
// UTILITY FUNCTIONS
//=============================================================================

void Renderer::formatBattery(char* buf, size_t size, double voltage) {
    snprintf(buf, size, "%.1fV", voltage);
}

void Renderer::formatTemp(char* buf, size_t size, double temp, bool celsius) {
    if (celsius) {
        snprintf(buf, size, "%.0fC", temp);
    } else {
        snprintf(buf, size, "%.0fF", temp * 9.0 / 5.0 + 32.0);
    }
}

void Renderer::formatTime(char* buf, size_t size, uint32_t milliseconds) {
    uint32_t seconds = milliseconds / 1000;
    uint32_t minutes = seconds / 60;
    seconds = seconds % 60;
    snprintf(buf, size, "%02d:%02d", (int)minutes, (int)seconds);
}

//=============================================================================
// QUICK FUNCTIONS (using global Brain)
//=============================================================================

namespace Quick {
    void print5x7(int x, int y, vex::color color, const char* fmt, ...) {
        char buffer[128];
        va_list args;
        va_start(args, fmt);
        vsnprintf(buffer, sizeof(buffer), fmt, args);
        va_end(args);
        
        Renderer r(Brain);
        r.drawString(x, y, 0, Font5x7::INFO, color, buffer);
    }
    
    void print6x8(int x, int y, vex::color color, const char* fmt, ...) {
        char buffer[128];
        va_list args;
        va_start(args, fmt);
        vsnprintf(buffer, sizeof(buffer), fmt, args);
        va_end(args);
        
        Renderer r(Brain);
        r.drawString(x, y, 0, Font6x8::INFO, color, buffer);
    }
    
    void print7x10(int x, int y, vex::color color, const char* fmt, ...) {
        char buffer[128];
        va_list args;
        va_start(args, fmt);
        vsnprintf(buffer, sizeof(buffer), fmt, args);
        va_end(args);
        
        Renderer r(Brain);
        r.drawString(x, y, 0, Font7x10::INFO, color, buffer);
    }
    
    void printCentered(int cx, int y, vex::color color, const char* fmt, ...) {
        char buffer[128];
        va_list args;
        va_start(args, fmt);
        vsnprintf(buffer, sizeof(buffer), fmt, args);
        va_end(args);
        
        Renderer r(Brain);
        r.drawCentered(cx, y, Font5x7::INFO, color, "%s", buffer);
    }
    
    void printRight(int rx, int y, vex::color color, const char* fmt, ...) {
        char buffer[128];
        va_list args;
        va_start(args, fmt);
        vsnprintf(buffer, sizeof(buffer), fmt, args);
        va_end(args);
        
        Renderer r(Brain);
        r.drawRight(rx, y, Font5x7::INFO, color, "%s", buffer);
    }
}

} // namespace PixelText